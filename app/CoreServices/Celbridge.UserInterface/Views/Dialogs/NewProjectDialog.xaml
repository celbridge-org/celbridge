<ContentDialog
  x:Class="Celbridge.UserInterface.Views.NewProjectDialog"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:local="using:Celbridge.UserInterface.Views"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  mc:Ignorable="d"
  PrimaryButtonText="{x:Bind CreateString}"
  SecondaryButtonText="{x:Bind CancelString}"
  IsPrimaryButtonEnabled="{x:Bind ViewModel.IsCreateButtonEnabled, Mode=OneWay}"
  PrimaryButtonClick="CreateButtonClick"
  SecondaryButtonClick="CancelButtonClick">

  <StackPanel Orientation="Vertical"
              HorizontalAlignment="Stretch"
              Spacing="8">

    <!-- Project name text box -->
    <TextBox x:Name="ProjectNameTextBox"
             MinWidth="200"
             IsSpellCheckEnabled="False"
             PlaceholderText="{x:Bind ProjectNamePlaceholderString}"
             Header="{x:Bind ProjectNameString}"
             Text="{x:Bind ViewModel.ProjectName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>

    <!-- Select folder grid -->
    <Grid>
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="50"/>
      </Grid.ColumnDefinitions>

      <TextBox Grid.Column="0"
               MinWidth="200"
               PlaceholderText="{x:Bind ProjectFolderPlaceholderString}"
               Margin="4"
               IsSpellCheckEnabled="False"
               Header="{x:Bind ProjectFolderString}"
               Text="{x:Bind ViewModel.DestFolderPath, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>

      <Button Grid.Column="1"
              VerticalAlignment="Bottom"
              Margin="0,0,0,4"
              Command="{x:Bind ViewModel.SelectFolderCommand}">
        <SymbolIcon Symbol="Folder"/>
      </Button>
    </Grid>

    <!-- Create subfolder checkbox -->
    <CheckBox HorizontalAlignment="Left"
              Content="{x:Bind CreateSubfolderString}"
              IsChecked="{x:Bind ViewModel.CreateSubfolder, Mode=TwoWay}"
              ToolTipService.ToolTip="{x:Bind CreateSubfolderTooltipString}"
              ToolTipService.Placement="Bottom"/>

    <!-- Save location info -->
    <!-- NOTE: The width below is to ensure that we don't get the wobble as the dialog resizes, but ideally I would like
             the text block to wrap and resize vertically. So far I've only managed to get it to do this with significantly smaller widths. More attention is required on
             this to get the desired effect. -->
    <StackPanel x:Name="SaveLocationPanel"
                Orientation="Horizontal"
                Margin="0,8,0,0"
                ToolTipService.ToolTip="{x:Bind SaveLocationTooltipString}"
                ToolTipService.Placement="Top"
                Opacity="{x:Bind ViewModel.IsCreateButtonEnabled, Mode=OneWay, Converter={StaticResource BoolToOpacityConverter}}">
      <FontIcon HorizontalAlignment="Left"
                VerticalAlignment="Center"
                FontFamily="{ThemeResource SymbolThemeFontFamily}"
                Glyph="&#xE946;"/>
      <TextBlock VerticalAlignment="Center"
                 Margin="6,0,0,0"
                 FontSize="12"
                 Text="{x:Bind ViewModel.ProjectSaveLocation, Mode=OneWay}"
                 TextWrapping="Wrap"
                 Width="500"
                 MaxWidth="500"/>
    </StackPanel>

  </StackPanel>

</ContentDialog>
